"use strict";(self.webpackChunkcomplete_guide=self.webpackChunkcomplete_guide||[]).push([[261],{1261:(k,g,p)=>{p.r(g),p.d(g,{RecipesModule:()=>O});var a=p(9808),n=p(2382),s=p(1845),e=p(7587),l=p(7568);const f=function(i){return[i]};let Z=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipe-item"]],inputs:{recipe:"recipe"},decls:8,vars:6,consts:[["routerLinkActive","active",1,"list-group-item","clearfix",3,"routerLink"],[1,"pull-left"],[1,"list-group-item-heading"],[1,"list-group-item-text"],[1,"pull-right"],["alt","",1,"img-responsive",2,"max-height","50px",3,"src"]],template:function(t,o){1&t&&(e.TgZ(0,"a",0)(1,"div",1)(2,"h4",2),e._uU(3),e.qZA(),e.TgZ(4,"p",3),e._uU(5),e.qZA()(),e.TgZ(6,"span",4),e._UZ(7,"img",5),e.qZA()()),2&t&&(e.Q6J("routerLink",e.VKq(4,f,o.recipe.id)),e.xp6(3),e.Oqu(o.recipe.name),e.xp6(2),e.Oqu(o.recipe.description),e.xp6(2),e.s9C("src",o.recipe.imagePath,e.LSH))},dependencies:[s.yS,s.Od]}),i})();function _(i,r){1&i&&e._UZ(0,"app-recipe-item",4),2&i&&e.Q6J("recipe",r.$implicit)}let R=(()=>{class i{constructor(t){this.recipeService=t}ngOnInit(){this.recipes=this.recipeService.getRecipes(),this.subscription=this.recipeService.recipesChanged.subscribe(t=>{this.recipes=t})}ngOnDestroy(){this.subscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.Z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipe-list"]],decls:8,vars:1,consts:[[1,"row"],[1,"col-xs-12"],["routerLink","new",1,"btn","btn-success"],[3,"recipe",4,"ngFor","ngForOf"],[3,"recipe"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"a",2),e._uU(3,"New recipe"),e.qZA()()(),e._UZ(4,"hr"),e.TgZ(5,"div",0)(6,"div",1),e.YNc(7,_,1,1,"app-recipe-item",3),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("ngForOf",o.recipes))},dependencies:[a.sg,s.yS,Z]}),i})(),C=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipes"]],decls:5,vars:0,consts:[[1,"row"],[1,"col-md-5"],[1,"col-md-7"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-recipe-list"),e.qZA(),e.TgZ(3,"div",2),e._UZ(4,"router-outlet"),e.qZA()())},dependencies:[s.lC,R]}),i})();var T=p(1110);let x=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-no-selected-recipe"]],decls:5,vars:0,template:function(t,o){1&t&&(e._UZ(0,"br")(1,"br")(2,"br"),e.TgZ(3,"h2"),e._uU(4,"Please select the recipe."),e.qZA())}}),i})();var b=p(3649);let m=(()=>{class i{constructor(t,o){this.dataStorageService=t,this.recipeService=o}resolve(t,o){const c=this.recipeService.getRecipes();return c.length>0?c:this.dataStorageService.fetchRecipes()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(b.Z),e.LFG(l.Z))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var A=p(3690);function F(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",15),e._UZ(2,"input",6),e.qZA(),e.TgZ(3,"div",16),e._UZ(4,"input",17),e.qZA(),e.TgZ(5,"div",16)(6,"button",4),e.NdJ("click",function(){const u=e.CHM(t).index,d=e.oxw();return e.KtG(d.onIngredientDelete(u))}),e._uU(7,"x"),e.qZA()()()}2&i&&e.Q6J("formGroupName",r.index)}let v=(()=>{class i{constructor(t,o,c){this.activatedRoute=t,this.recipeService=o,this.router=c,this.isEditMode=!1}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.isEditMode=null!=t.id,this.id=Number(t.id),this.initForm()})}initForm(){let t="",o="",c="",u=new n.Oe([]);if(this.isEditMode){const d=this.recipeService.getRecipe(this.id);if(t=d.name,o=d.imagePath,c=d.description,d.ingredients)for(const h of d.ingredients)u.push(new n.cw({name:new n.NI(h.name,n.kI.required),amount:new n.NI(h.amount,[n.kI.required,n.kI.pattern(/^[1-9]+[0-9]*$/)])}))}this.recipeForm=new n.cw({name:new n.NI(t,n.kI.required),imagePath:new n.NI(o,n.kI.required),description:new n.NI(c,n.kI.required),ingredients:u})}onSubmit(){let t;return t=this.isEditMode?this.recipeService.updateRecipe(this.id,this.recipeForm.value.name,this.recipeForm.value.description,this.recipeForm.value.imagePath,this.recipeForm.value.ingredients):this.recipeService.addRecipe(new A.z(this.recipeForm.value.name,this.recipeForm.value.description,this.recipeForm.value.imagePath,this.recipeForm.value.ingredients)),this.router.navigate(["recipes",t.id])}getIngredientControls(){return this.recipeForm.get("ingredients").controls}onAddIngredient(){this.recipeForm.get("ingredients").push(new n.cw({name:new n.NI(null,n.kI.required),amount:new n.NI(null,[n.kI.required,n.kI.pattern(/^[1-9]+[0-9]*$/)])}))}onCancel(){return this.router.navigate([".."],{relativeTo:this.activatedRoute})}onIngredientDelete(t){this.recipeForm.get("ingredients").removeAt(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.gz),e.Y36(l.Z),e.Y36(s.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipe-edit"]],decls:38,vars:4,consts:[[1,"row"],[1,"col-xs-12"],[3,"formGroup","ngSubmit"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[1,"form-group"],["type","text","formControlName","name",1,"form-control"],["type","text","formControlName","imagePath",1,"form-control"],["imagePath",""],["alt","",1,"img","img-responsive",3,"src"],["rows","6","formControlName","description",1,"form-control"],["formArrayName","ingredients",1,"col-xs-12"],["class","row","style","margin-top: 10px;",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success",3,"click"],[1,"row",2,"margin-top","10px",3,"formGroupName"],[1,"col-xs-8"],[1,"col-xs-2"],["type","number","formControlName","amount",1,"form-control"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(3,"div",0)(4,"div",1)(5,"button",3),e._uU(6,"Save"),e.qZA(),e.TgZ(7,"button",4),e.NdJ("click",function(){return o.onCancel()}),e._uU(8,"Cancel"),e.qZA()()(),e.TgZ(9,"div",0)(10,"div",1)(11,"div",5)(12,"label"),e._uU(13,"Name"),e.qZA(),e._UZ(14,"input",6),e.qZA()()(),e.TgZ(15,"div",0)(16,"div",1)(17,"div",5)(18,"label"),e._uU(19,"Image URL"),e.qZA(),e._UZ(20,"input",7,8),e.qZA()()(),e.TgZ(22,"div",0)(23,"div",1),e._UZ(24,"img",9),e.qZA()(),e.TgZ(25,"div",0)(26,"div",1)(27,"label"),e._uU(28,"Descriptions"),e.qZA(),e._UZ(29,"textarea",10),e.qZA()(),e.TgZ(30,"div",0)(31,"div",11),e.YNc(32,F,8,1,"div",12),e._UZ(33,"hr"),e.TgZ(34,"div",0)(35,"div",1)(36,"button",13),e.NdJ("click",function(){return o.onAddIngredient()}),e._uU(37,"Add Ingredient"),e.qZA()()()()()()()()),2&t){const c=e.MAs(21);e.xp6(2),e.Q6J("formGroup",o.recipeForm),e.xp6(3),e.Q6J("disabled",!o.recipeForm.valid),e.xp6(19),e.s9C("src",c.value,e.LSH),e.xp6(8),e.Q6J("ngForOf",o.getIngredientControls())}},dependencies:[a.sg,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.sg,n.u,n.x0,n.CE],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%], select.ng-invalid.ng-touched[_ngcontent-%COMP%], textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}"]}),i})();var S=p(1300);function I(i,r){if(1&i&&(e.TgZ(0,"li",12),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.AsE(" ",t.name," X ",t.amount," ")}}function w(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA()(),e.TgZ(4,"div",1)(5,"div",2)(6,"h1"),e._uU(7),e.qZA()()(),e.TgZ(8,"div",1)(9,"div",2)(10,"div",4)(11,"button",5),e._uU(12,"Manage recipe "),e._UZ(13,"span",6),e.qZA(),e.TgZ(14,"ul",7)(15,"li")(16,"a",8),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.addToShoppingList())}),e._uU(17,"To shopping list"),e.qZA()(),e.TgZ(18,"li")(19,"a",9),e._uU(20,"Edit recipe"),e.qZA()(),e.TgZ(21,"li")(22,"a",8),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.onDeleteRecipe())}),e._uU(23,"Delete recipe"),e.qZA()()()()()(),e.TgZ(24,"div",1)(25,"div",2)(26,"h4"),e._uU(27),e.qZA()()(),e.TgZ(28,"div",1)(29,"div",2)(30,"div",10),e.YNc(31,I,2,2,"li",11),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.s9C("src",t.recipe.imagePath,e.LSH),e.xp6(4),e.Oqu(t.recipe.name),e.xp6(20),e.Oqu(t.recipe.description),e.xp6(4),e.Q6J("ngForOf",t.recipe.ingredients)}}const N=[{path:"",component:C,canActivate:[T.P],children:[{path:"",component:x,resolve:[m]},{path:"new",component:v},{path:":id",component:(()=>{class i{constructor(t,o,c){this.recipeService=t,this.activatedRoute=o,this.router=c}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.recipe=this.recipeService.getRecipe(Number(t.id))})}addToShoppingList(){this.recipeService.addToShoppingList(this.recipe)}onDeleteRecipe(){this.recipeService.deleteRecipe(this.recipe.id),this.router.navigate(["recipes"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.Z),e.Y36(s.gz),e.Y36(s.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipe-detail"]],inputs:{recipe:"recipe"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"row"],[1,"col-xs-12"],["alt","",1,"img-responsive",2,"max-width","500px",3,"src"],["appDropdown","",1,"btn-group"],["type","button",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],[1,"dropdown-menu"],[3,"click"],["routerLink","edit"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(t,o){1&t&&e.YNc(0,w,32,4,"div",0),2&t&&e.Q6J("ngIf",o.recipe)},dependencies:[a.sg,a.O5,s.yS,S.w]}),i})(),resolve:[m]},{path:":id/edit",component:v,resolve:[m]}]}];let y=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[s.Bz.forChild(N),s.Bz]}),i})();var q=p(4466);let O=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[a.ez,n.UX,y,q.m]}),i})()}}]);